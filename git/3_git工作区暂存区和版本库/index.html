

<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <title>Devs Stack</title>
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/main.43fe2ee2b2e728c274f2.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/metisMenu.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/theme.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/darkula.css" />

</head>

<body>
    <div id="dashboard-app" class="fixed-header fixed-left-sider fixed-footer">
        <header>
            <div class="aside-header">
                <div>
                    <label class="text-light text-lg-center p-2"><h2> <a class="text-light text-lg-center p-2" href="../..">Devs Stack</a></h2></label>
                </div>
            </div>
            <div class="header-bar">
                <div  class="d-flex justify-content-between">

                    <div class="left-container">

                    </div>
                    <div class="right-container"> 
                        <div>
                            <button id="btn-set-big">大</button>
                        </div>
                        <div>
                            <button id="btn-set-normal">中</button>
                        </div>
                        <div>
                            <button id="btn-set-small">小</button>
                        </div>
                        <div class="dropdown p-2">
                            <input type="text" id="mkdocs-search-query" placeholder="搜索" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="dashboard-body">
            <div class="aside-left" id="aside_left">
                <nav class="sidebar-nav">

        <ul class="metismenu" id="main-menu">
            <li class="sidebar-search-wrapper text-light" style="font-size: 14px;padding: 1rem;font-weight: 600;">
                文章列表
            </li>
            
            
            
            
  



    <li class="">
        <a href="../.." title="Welcome" class="md-nav__link" aria-link>
          Welcome
        </a>
      </li>

            
            
            
            
  

  
  
  



    <li>
        <a class="has-arrow active" href="#"  aria-expanded="true" >
                Git
        </a>
        <ul aria-expanded="true" class="active collapse in">
                
                
                  
                  
                  
  



    <li class="active">
        <a href="../0_GIT介绍/" title="Git介绍" class="md-nav__link" aria-link>
          Git介绍
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../1_创建版本库/" title="1.创建版本库" class="md-nav__link" aria-link>
          1.创建版本库
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../1_CentOS7中安装git/" title="1_CentOS7中安装git" class="md-nav__link" aria-link>
          1_CentOS7中安装git
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../2_git和GitHub/" title="2_git和GitHub" class="md-nav__link" aria-link>
          2_git和GitHub
        </a>
      </li>

                
                  
                  
                  
  

  
  
  



    <li>
        <a class="active"  href="./" title="3_git工作区暂存区和版本库"  aria-link>
                3_git工作区暂存区和版本库
        </a>
    </li>


                
                  
                  
                  
  



    <li class="active">
        <a href="../4_git使用基础篇/" title="4_git使用基础篇" class="md-nav__link" aria-link>
          4_git使用基础篇
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../5_简明 Git 命令速查表（中文版）/" title="5_简明 Git 命令速查表（中文版）" class="md-nav__link" aria-link>
          5_简明 Git 命令速查表（中文版）
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../6_git仓库创建/" title="6_git仓库创建" class="md-nav__link" aria-link>
          6_git仓库创建
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../7_git分支管理/" title="7_git分支管理" class="md-nav__link" aria-link>
          7_git分支管理
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../8_git工作流程/" title="8_git工作流程" class="md-nav__link" aria-link>
          8_git工作流程
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../9_git工作常用命令/" title="9_git工作常用命令" class="md-nav__link" aria-link>
          9_git工作常用命令
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../10_git标签/" title="10_git标签" class="md-nav__link" aria-link>
          10_git标签
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../11_git服务器搭建/" title="11_git服务器搭建" class="md-nav__link" aria-link>
          11_git服务器搭建
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../Git处理 GitHub 不允许上传超过 100MB 文件的问题/" title="Git处理 GitHub 不允许上传超过 100MB 文件的问题" class="md-nav__link" aria-link>
          Git处理 GitHub 不允许上传超过 100MB 文件的问题
        </a>
      </li>

                
        </ul>
    </li>


            
            
            
            
  



    <li>
        <a class="has-arrow " href="#"  aria-expanded="false" >
                SVN
        </a>
        <ul aria-expanded="false" class=" ">
                
                
                  
                  
                  
  



    <li class="">
        <a href="../../svn/" title="概要" class="md-nav__link" aria-link>
          概要
        </a>
      </li>

                
        </ul>
    </li>


            
            <!--<li>
                <a class="has-arrow" href="#">
                    数据源
                </a>
                <ul aria-expanded="true">
                    <li>
                        <a>人口普查数据</a>
                    </li>
                    <li>
                        <a>2017销售数据</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="has-arrow" href="#">
                    数据源
                </a>
                <ul aria-expanded="true">
                    <li>
                        <a>人口普查数据</a>
                    </li>
                    <li>
                        <a>2017销售数据</a>
                    </li>
                </ul>
            </li>-->
        </ul>
    </nav>
            </div>
            <main class="page">
                <div class="page-title">
                    <div class="breadcrumb"> <b>文章标题:&nbsp;&nbsp;&nbsp;&nbsp; </b>3_git工作区暂存区和版本库</div>
                </div>
                <div class="page-content">
                    <div class="page-content-body">
                        <div class="page-content-body-scrollwrap">
                            <div>
                                <h2 id="git">Git 工作区、暂存区和版本库</h2>
<div class="toc">
<ul>
<li><a href="#git">Git 工作区、暂存区和版本库</a><ul>
<li><a href="#_1">常见的操作</a></li>
</ul>
</li>
</ul>
</div>
<p><a href="http://www.runoob.com/git/git-workspace-index-repo.html">原文链接</a></p>
<p>基本概念
我们先来理解下Git 工作区、暂存区和版本库概念
<em> <strong>工作区：</strong>就是你在电脑里能看到的目录。
</em> <strong>暂存区：</strong>英文叫stage, 或index。一般存放在 &ldquo;.git目录下&rdquo; 下的index文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。
* <strong>版本库：</strong> 工作区有一个隐藏目录.git，这个不算工作区，而是Git的版本库。
  下面这个图展示了工作区、版本库中的暂存区和版本库之间的关系：</p>
<p><img alt="" src="../images/area.jpg" /></p>
<p>图中左侧为工作区，右侧为版本库。在版本库中标记为 &ldquo;index&rdquo; 的区域是暂存区（stage, index），标记为 &ldquo;master&rdquo; 的是 master 分支所代表的目录树。</p>
<p>图中我们可以看出此时 &ldquo;HEAD&rdquo; 实际是指向 master 分支的一个&rdquo;游标&rdquo;。所以图示的命令中出现 HEAD 的地方可以用 master 来替换。</p>
<p>图中的 objects 标识的区域为 Git 的对象库，实际位于 &ldquo;.git/objects&rdquo; 目录下，里面包含了创建的各种对象及内容。</p>
<h3 id="_1">常见的操作</h3>
<ol>
<li>
<p>当对工作区修改（或新增）的文件执行 &ldquo;git add&rdquo; 命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的ID被记录在暂存区的文件索引中。</p>
</li>
<li>
<p>当执行提交操作（git commit）时，暂存区的目录树写到版本库（对象库）中，master 分支会做相应的更新。即 master 指向的目录树就是提交时暂存区的目录树。</p>
</li>
<li>
<p>当执行 &ldquo;git reset HEAD&rdquo; 命令时，暂存区的目录树会被重写，被 master 分支指向的目录树所替换，但是工作区不受影响。</p>
</li>
<li>
<p>当执行 &ldquo;git rm &ndash;cached &lt; file &gt;&rdquo; 命令时，会直接从暂存区删除文件，工作区则不做出改变。</p>
</li>
<li>
<p>当执行 &ldquo;git checkout <strong> . </strong>&rdquo; 或者 &ldquo;git checkout - - &lt; file &gt;&rdquo; 命令时，会用暂存区全部或指定的文件替换工作区的文件。<strong>这个操作很危险</strong>，会清除工作区中未添加到暂存区的改动。</p>
</li>
<li>
<p>当执行 &ldquo;git checkout HEAD <strong> . </strong>&rdquo; 或者 &ldquo;git checkout HEAD - - &lt; file &gt;&rdquo; 命令时，会用 HEAD 指向的 master 分支中的全部或者部分文件替换暂存区和以及工作区中的文件。<strong> 这个命令也是极具危险性的 </strong>，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改</p>
</li>
<li>
<p>当执行“git checkout”时，汇总显示工作区域，暂存区与HEAD的差异，这个命令等同于“git checkout HEAD”,与第5，6差异在于一个&rdquo;.&rdquo;或“&ndash;”</p>
</li>
</ol>
<p>下面2张图可以直观的帮助你理解：
<img alt="" src="../images/git-operate1.png" /><br />
<img alt="" src="../images/git-operate2.png" />  </p>
                            </div>
                        </div>
                    </div>
                    <!-- Table of contents -->
                    
                    <div class="page-content-sider" data-md-component="toc">
                        <div class="page-content-sider-scrollwrap">
                            <div>
                                

<nav class="md-nav md-nav--secondary">
          
        <h2 class="md-nav__title" for="__toc">目录</h2>
        <ul class="md-nav__list" data-md-scrollfix>
             <li class="md-nav__item">
        <a href="#git" title="Git 工作区、暂存区和版本库" class="md-nav__link">
          Git 工作区、暂存区和版本库
        </a>
        
          <nav class="md-nav">
            <ul class="md-nav__list">
              
                <li class="md-nav__item">
        <a href="#_1" title="常见的操作" class="md-nav__link">
          常见的操作
        </a>
        
      </li>
              
            </ul>
          </nav>
        
      </li>     
        </ul>
        
</nav>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </main>
        </div>
        <footer>
            <div>© 2008-2017, Nicety.io by WANGWEIWEI . All rights reserved. Version：v0.0.7
            </div>
        </footer>
    </div>
    <script>
        var base_url = '../..',
            shortcuts = '';
    </script>
    <script src="../../assets/javascripts/jquery.min.js"></script>
    <script src="../../assets/javascripts/popper.min.js"></script>
    <script src="../../assets/javascripts/bootstrap.min.js"></script>
    <script src="../../assets/javascripts/metisMenu.js"></script>
    <script src="../../assets/javascripts/highlight.pack.js"></script>
    <!--<script src="../../search/lunr.js"></script>
    <script src="../../assets/javascripts/lunr.stemmer.support.js"></script>
    <script src="../../assets/javascripts/tinyseg.js"></script>
    <script src="../../assets/javascripts/lunr.zhcn.js"></script>
    -->
    <script src="../../search/worker.js"></script>
    <script src="../../search/main.js"></script>
    <script src="../../assets/javascripts/theme.js"></script>
</body>

</html>
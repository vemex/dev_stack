<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Devs Stack</title>
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/main.43fe2ee2b2e728c274f2.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/metisMenu.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/stylesheets/theme.css" />

</head>

<body>
    <div id="dashboard-app" class="fixed-header fixed-left-sider fixed-footer">
        <header>
            <div class="aside-header">
                <div>
                    <label class="text-light text-lg-center p-2"><h2> <a class="text-light text-lg-center p-2" href="../.." >Devs Stack</a></h2></label> 
                </div>
            </div>
            <div class="header-bar">
                <div data-v-a870e5a8="" class="d-flex justify-content-between">
                        
                    <div data-v-a870e5a8="" class="left-container">
                      
                    </div>
                    <div data-v-a870e5a8="" class="right-container">
                        <div  class="dropdown p-2">
                                <input type="text" id="searchbox" placeholder="搜索" class="form-control">
                        </div> 
                    </div>
                </div>
            </div>
        </header>
        <div class="dashboard-body">
            <div class="aside-left" id="aside_left">
                    <nav class="sidebar-nav">

        <ul class="metismenu" id="main-menu">
            <li class="sidebar-search-wrapper text-light" style="font-size: 14px;padding: 1rem;font-weight: 600;">
                文章列表
            </li>
            
            
            
            
  



    <li class="">
        <a href="../.." title="Welcome" class="md-nav__link" aria-link>
          Welcome
        </a>
      </li>

            
            
            
            
  

  
  
  



    <li>
        <a class="has-arrow active" href="#"  aria-expanded="true" >
                Git
        </a>
        <ul aria-expanded="true" class="active collapse in">
                
                
                  
                  
                  
  



    <li class="active">
        <a href="../1_CentOS7中安装git/" title="1_CentOS7中安装git" class="md-nav__link" aria-link>
          1_CentOS7中安装git
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../2_git和GitHub/" title="2_git和GitHub" class="md-nav__link" aria-link>
          2_git和GitHub
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../3_git工作区暂存区和版本库/" title="3_git工作区暂存区和版本库" class="md-nav__link" aria-link>
          3_git工作区暂存区和版本库
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../4_git使用基础篇/" title="4_git使用基础篇" class="md-nav__link" aria-link>
          4_git使用基础篇
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../5_简明 Git 命令速查表（中文版）/" title="5_简明 Git 命令速查表（中文版）" class="md-nav__link" aria-link>
          5_简明 Git 命令速查表（中文版）
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../6_git仓库创建/" title="6_git仓库创建" class="md-nav__link" aria-link>
          6_git仓库创建
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../7_git分支管理/" title="7_git分支管理" class="md-nav__link" aria-link>
          7_git分支管理
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../8_git工作流程/" title="8_git工作流程" class="md-nav__link" aria-link>
          8_git工作流程
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../9_git工作常用命令/" title="9_git工作常用命令" class="md-nav__link" aria-link>
          9_git工作常用命令
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../10_git标签/" title="10_git标签" class="md-nav__link" aria-link>
          10_git标签
        </a>
      </li>

                
                  
                  
                  
  



    <li class="active">
        <a href="../11_git服务器搭建/" title="11_git服务器搭建" class="md-nav__link" aria-link>
          11_git服务器搭建
        </a>
      </li>

                
                  
                  
                  
  

  
  
  



    <li>
        <a class="active"  href="./" title="Git处理 GitHub 不允许上传超过 100MB 文件的问题"  aria-link>
                Git处理 GitHub 不允许上传超过 100MB 文件的问题
        </a>
    </li>


                
        </ul>
    </li>


            
            
            
            
  



    <li>
        <a class="has-arrow " href="#"  aria-expanded="false" >
                SVN
        </a>
        <ul aria-expanded="false" class=" ">
                
                
                  
                  
                  
  



    <li class="">
        <a href="../../svn/" title="概要" class="md-nav__link" aria-link>
          概要
        </a>
      </li>

                
        </ul>
    </li>


            
            <!--<li>
                <a class="has-arrow" href="#">
                    数据源
                </a>
                <ul aria-expanded="true">
                    <li>
                        <a>人口普查数据</a>
                    </li>
                    <li>
                        <a>2017销售数据</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="has-arrow" href="#">
                    数据源
                </a>
                <ul aria-expanded="true">
                    <li>
                        <a>人口普查数据</a>
                    </li>
                    <li>
                        <a>2017销售数据</a>
                    </li>
                </ul>
            </li>-->
        </ul>
    </nav>
            </div>
            <main class="page">
                <div class="page-title">
                    <div class="breadcrumb"> <b>文章标题:&nbsp;&nbsp;&nbsp;&nbsp;  </b>Git处理 GitHub 不允许上传超过 100MB 文件的问题</div>
                </div>
                <div class="page-content">
                    <div class="page-content-body">
                        <div class="page-content-body-scrollwrap">
                            <div> 
                                <h1 id="git-github-100mb">Git处理 GitHub 不允许上传超过 100MB 文件的问题</h1>
<p>参考原文：http://www.liuxiao.org/2017/02/git-%E5%A4%84%E7%90%86-github-%E4%B8%8D%E5%85%81%E8%AE%B8%E4%B8%8A%E4%BC%A0%E8%B6%85%E8%BF%87-100mb-%E6%96%87%E4%BB%B6%E7%9A%84%E9%97%AE%E9%A2%98/</p>
<p>其他解决方案：</p>
<p>http://jingpin.jikexueyuan.com/article/36116.html</p>
<p>最近在使用 Github 时候遇到一个问题，提示文件过大不允许上传：</p>
<pre><code class="shell">remote: error: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.
remote: error: Trace: 150be0ada58c003160b0798a30b48c46
remote: error: See http://git.io/iEPt8g for more information.
remote: error: File notes/spring/Spring+Cloud与Docker微服务架构实战.pdf is 100.71 MB; this exceeds GitHub's file size limit of 100.00 MB
To https://github.com/caojx-git/learn.git
 ! [remote rejected]   master -&gt; master (pre-receive hook declined)
error: failed to push some refs to 'https://github.com/caojx-git/learn.git'
</code></pre>

<p>但有的时候我们还是需要上传这些大文件，这时候怎样做呢？</p>
<h2 id="_1">一、移除错误重新提交</h2>
<h3 id="11">1.1 移除错误缓存</h3>
<p>首先应该移除所有错误的 cache，对于文件：</p>
<pre><code class="shell">git rm --cached path_of_a_giant_file
</code></pre>

<p>对于文件夹：</p>
<pre><code class="shell">git rm --cached -r path_of_a_giant_dir
</code></pre>

<p>例如对于我的例子就是这样的：</p>
<pre><code class="shell">cd /Users/caojx/code/learn/notes/spring/
git rm --cached Spring+Cloud与Docker微服务架构实战.pdf
</code></pre>

<h3 id="12">1.2 重新提交</h3>
<p>执行下边命令大文件将会从你的commit记录里移除。</p>
<pre><code class="shell">git commit --amend -CHEAD
</code></pre>

<p>重新提交：</p>
<pre><code class="shell">git push
</code></pre>

<h2 id="_2">二、支持大文件支持</h2>
<h3 id="21-git-large-file-storage">2.1 将大文件加入 Git Large File Storage</h3>
<p>1）首先安装 git-lfs（下边是mac版的安装方式，其他方式见官网https://git-lfs.github.com/）</p>
<pre><code class="shell">brew install git-lfs
</code></pre>

<p>2）将想要保存的大文件 “路径” 或者 “类型” 添加进 track：</p>
<pre><code class="shell">git lfs track &quot;name_of_a_giant_file&quot;
</code></pre>

<p>例如对于我的例子就是这样的：</p>
<pre><code class="shell">git lfs track &quot;*.pdf&quot;
</code></pre>

<p>3）确保.gitattributes文件被追踪到</p>
<pre><code class="shell">git add .gitattributes
</code></pre>

<p><strong>需要注意的是这里面仅能添加类型的扩展名或者文件名作为跟踪方式，不可以添加路径或者目录进行跟踪</strong></p>
<h3 id="22-git">2.2 将想要保存的大文件正常添加进 git</h3>
<pre><code class="shell">git add path_of_a_giant_file
</code></pre>

<p>或者：</p>
<pre><code class="shell">git add extension_name_of_giant_files
</code></pre>

<p>例如对于我的例子就是这样的：</p>
<pre><code class="shell">git add Examples/iOSDemo/Pods/dependency/libg2o.a
</code></pre>

<h3 id="23">2.3 正常进行提交&amp;推送</h3>
<pre><code class="shell">git commit -m &quot;Add design file&quot;
git push origin master
</code></pre>

<h3 id="24">2.4 补充技巧</h3>
<p>提交以后出错再进行上面的步骤可能比较麻烦，如果你已知自己提交的版本库中确实存在一些大于 100MB 的文件，不妨先搜索：</p>
<pre><code class="shell">find ./ -size +100M
</code></pre>

<p>然后将这些文件移除，等待其他文件提交完后再复制回来，这样只需要从步骤3的操作开始就可以了。</p>
<h3 id="25">2.5 常见问题</h3>
<p>1、错误：fatal error: unexpected signal during runtime execution</p>
<p><code>goroutine 23 [chan receive]:github.com/github/git-lfs/lfs.ScanRefsToChan.func2(0xc8200d4540, 0xc8200c6000, 0xc8200d45a0)/Users/rick/go/src/github.com/github/git-lfs/lfs/scanner.go:153 +0x4ecreated by github.com/github/git-lfs/lfs.ScanRefsToChan/Users/rick/go/src/github.com/github/git-lfs/lfs/scanner.go:160 +0x30c</code></p>
<p>出现这个问题通常是由于 go 引擎未安装或者版本太老（1.5.1及以下版本在 Mac 上面有未知错误），或者 git-lfs 版本太老。如果没有安装 go，可使用如下命令安装：</p>
<pre><code class="shell">brew install git-lfs
</code></pre>

<p>然后使用如下命令升级：</p>
<pre><code class="shell">brew update
brew upgrade go
brew upgrade git-lfs
</code></pre>

<p>然后使用如下命令查看：</p>
<pre><code class="shell">git-lfs version
</code></pre>

<p>我这里的版本号如下，如果你比我的版本高就对了，否则可以尝试卸载之前安装的 go 和 git-lfs 重新安装：
<code>git-lfs/1.5.5 (GitHub; darwin amd64; go 1.7.4)</code></p>
<h2 id="_3">三、参考文献</h2>
<p>[1] <a href="https://help.github.com/enterprise/11.10.340/user/articles/working-with-large-files/">https://help.github.com/enterprise/11.10.340/user/articles/working-with-large-files/</a>
[2] <a href="https://git-lfs.github.com/">https://git-lfs.github.com/</a></p>
                            </div>
                        </div>
                    </div>
                    <!-- Table of contents -->
                    
                    <div class="page-content-sider" data-md-component="toc">
                        <div class="page-content-sider-scrollwrap">
                            <div>
                                

<nav class="md-nav md-nav--secondary">
            
        <h2 class="md-nav__title" for="__toc">目录</h2>
        <ul class="md-nav__list" data-md-scrollfix>
             <li class="md-nav__item">
        <a href="#_1" title="一、移除错误重新提交" class="md-nav__link">
          一、移除错误重新提交
        </a>
        
          <nav class="md-nav">
            <ul class="md-nav__list">
              
                <li class="md-nav__item">
        <a href="#11" title="1.1 移除错误缓存" class="md-nav__link">
          1.1 移除错误缓存
        </a>
        
      </li>
              
                <li class="md-nav__item">
        <a href="#12" title="1.2 重新提交" class="md-nav__link">
          1.2 重新提交
        </a>
        
      </li>
              
            </ul>
          </nav>
        
      </li>  <li class="md-nav__item">
        <a href="#_2" title="二、支持大文件支持" class="md-nav__link">
          二、支持大文件支持
        </a>
        
          <nav class="md-nav">
            <ul class="md-nav__list">
              
                <li class="md-nav__item">
        <a href="#21-git-large-file-storage" title="2.1 将大文件加入 Git Large File Storage" class="md-nav__link">
          2.1 将大文件加入 Git Large File Storage
        </a>
        
      </li>
              
                <li class="md-nav__item">
        <a href="#22-git" title="2.2 将想要保存的大文件正常添加进 git" class="md-nav__link">
          2.2 将想要保存的大文件正常添加进 git
        </a>
        
      </li>
              
                <li class="md-nav__item">
        <a href="#23" title="2.3 正常进行提交&amp;推送" class="md-nav__link">
          2.3 正常进行提交&amp;推送
        </a>
        
      </li>
              
                <li class="md-nav__item">
        <a href="#24" title="2.4 补充技巧" class="md-nav__link">
          2.4 补充技巧
        </a>
        
      </li>
              
                <li class="md-nav__item">
        <a href="#25" title="2.5 常见问题" class="md-nav__link">
          2.5 常见问题
        </a>
        
      </li>
              
            </ul>
          </nav>
        
      </li>  <li class="md-nav__item">
        <a href="#_3" title="三、参考文献" class="md-nav__link">
          三、参考文献
        </a>
        
      </li>     
        </ul>
        
</nav>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </main>
        </div>
        <footer>
            <div>© 2008-2017, Nicety.io by WANGWEIWEI . All rights reserved. Version：v0.0.7
            </div>
        </footer>
    </div>
    <script src="../../assets/javascripts/jquery.min.js"></script>
    <script src="../../assets/javascripts/popper.min.js"></script>
    <script src="../../assets/javascripts/bootstrap.min.js"></script>
    <script src="../../assets/javascripts/metisMenu.js"></script>
    <script src="../../assets/javascripts/lunr.js"></script>
    <script src="../../assets/javascripts/theme.js"></script>
</body>

</html>